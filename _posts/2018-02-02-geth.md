---
layout: post
title: "Geth æ­å»ºä»¥å¤ªåŠç§æœ‰ç½‘ç»œ"
description: ""
category: articles
tags: [Blockchain]
comments: true
---

## Geth

[Geth](https://geth.ethereum.org/) æ˜¯ ethereum åè®®çš„å…·ä½“è½åœ°å®žçŽ°ï¼Œé€šè¿‡ gethï¼Œä½ å¯ä»¥å®žçŽ° ethereum çš„å„ç§åŠŸèƒ½ï¼Œå¦‚è´¦æˆ·çš„æ–°å»ºç¼–è¾‘åˆ é™¤ï¼Œå¼€å¯æŒ–çŸ¿ï¼Œether å¸çš„è½¬ç§»ï¼Œæ™ºèƒ½åˆçº¦çš„éƒ¨ç½²å’Œæ‰§è¡Œç­‰ç­‰ã€‚

Geth åˆå go-ethereum. æ˜¯ä»¥å¤ªåŠåè®®çš„ä¸‰ç§å®žçŽ°ä¹‹ä¸€ï¼ŒGeth å¯ä»¥è¢«å®‰è£…åœ¨å¾ˆå¤šæ“ä½œç³»ç»Ÿä¸Šï¼ŒåŒ…æ‹¬ Windowsã€Linuxã€Mac çš„ OSXã€Android æˆ–è€… iOS ç³»ç»Ÿã€‚

## å®‰è£…

```
brew tap ethereum/ethereum
brew install ethereum
```

è¿‡ç¨‹æ¯”è¾ƒæ…¢ï¼Œè€å¿ƒç­‰å¾…ã€‚å®‰è£…å®ŒæˆåŽï¼Œæ‰§è¡Œ `geth version` éªŒè¯ï¼š

```
$ geth version
Geth
Version: 1.7.3-stable
Architecture: amd64
Protocol Versions: [63 62]
Network Id: 1
Go Version: go1.9.3
Operating System: darwin
GOPATH=
GOROOT=/usr/local/Cellar/go/1.9.3/libexec
```

## å®šä¹‰ç§æœ‰çš„åˆ›ä¸–çŠ¶æ€

é¦–å…ˆéœ€è¦å®šä¹‰ç§æœ‰ç½‘ç»œçš„èµ·å§‹çŠ¶æ€ï¼Œä¹‹åŽçš„æ‰€æœ‰èŠ‚ç‚¹éƒ½éœ€è¦å¯¹å…¶è®¤å¯ã€‚èµ·å§‹çŠ¶æ€ç”± JSON æ–‡ä»¶å®šä¹‰ï¼Œæ¯”å¦‚å¯ä»¥ä¸º `genesis.json`ã€‚

å‘½ä»¤è¡Œä¸­è¿›å…¥åˆ°æŸä¸ªç›®å½•ä¸‹ï¼Œæ–°å»ºæ–‡ä»¶ `genesis.json`ã€‚

```
{
  "config": {
        "chainId": 123456,
        "homesteadBlock": 0,
        "eip155Block": 0,
        "eip158Block": 0
    },
  "alloc"      : {},
  "coinbase"   : "0x0000000000000000000000000000000000000000",
  "difficulty" : "0x20000",
  "extraData"  : "",
  "gasLimit"   : "0x2fefd8",
  "nonce"      : "0x0000000000000042",
  "mixhash"    : "0x0000000000000000000000000000000000000000000000000000000000000000",
  "parentHash" : "0x0000000000000000000000000000000000000000000000000000000000000000",
  "timestamp"  : "0x00"
}
```

- `config.chainId` // åŒºå—é“¾çš„IDï¼Œåœ¨ geth å‘½ä»¤ä¸­çš„ --networkid å‚æ•°éœ€è¦ä¸Ž chainId çš„å€¼ä¸€è‡´

- `config.homesteadBlock` // Homestead ç¡¬åˆ†å‰åŒºå—é«˜åº¦ï¼Œä¸éœ€è¦å…³æ³¨

- `config.eip155Block` // EIP 155 ç¡¬åˆ†å‰é«˜åº¦ï¼Œä¸éœ€è¦å…³æ³¨

- `config.eip158Block` // EIP 158 ç¡¬åˆ†å‰é«˜åº¦ï¼Œä¸éœ€è¦å…³æ³¨

- `coinbase` // çŸ¿å·¥è´¦å·ï¼Œç¬¬ä¸€ä¸ªåŒºå—æŒ–å‡ºåŽå°†ç»™è¿™ä¸ªçŸ¿å·¥è´¦å·å‘é€å¥–åŠ±çš„ä»¥å¤ªå¸

- `difficulty` // éš¾åº¦å€¼ï¼Œè¶Šå¤§è¶Šéš¾

- `extraData` // é™„åŠ ä¿¡æ¯éšä¾¿å¡«

- `gasLimit` // gas çš„æ¶ˆè€—æ€»é‡é™åˆ¶ï¼Œç”¨æ¥é™åˆ¶åŒºå—èƒ½åŒ…å«çš„äº¤æ˜“ä¿¡æ¯æ€»å’Œï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯ç§æœ‰é“¾ï¼Œæ‰€ä»¥å¡«æœ€å¤§

- `nonce` // ä¸€ä¸ª 64 ä½éšæœºæ•°

- `mixhash` // ä¸Ž nonce é…åˆç”¨äºŽæŒ–çŸ¿ï¼Œç”±ä¸Šä¸€ä¸ªåŒºå—çš„ä¸€éƒ¨åˆ†ç”Ÿæˆçš„ hash

- `parentHash` // ä¸Šä¸€ä¸ªåŒºå—çš„ hash å€¼

- `alloc` // é¢„è®¾è´¦å·ä»¥åŠè´¦å·çš„ä»¥å¤ªå¸æ•°é‡ï¼Œç§æœ‰é“¾æŒ–çŸ¿æ¯”è¾ƒå®¹æ˜“å¯ä»¥ä¸é…ç½®

é€šå¸¸æƒ…å†µä¸‹ä»¥ä¸Šçš„å®šä¹‰æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯æœ€å¥½å°†éšæœºæ•°æ”¹ä¸ºæŸä¸ªéšæœºå€¼ï¼Œé˜²æ­¢è¢«æœªçŸ¥çš„è¿œç¨‹èŠ‚ç‚¹è¿žæŽ¥ã€‚alloc å­—æ®µå¯ä»¥è¿›è¡Œè´¦æˆ·çš„é…ç½®ï¼Œæ¯”å¦‚è¯´ä¸ºè´¦æˆ·æä¾›èµ„é‡‘ï¼Œä¾¿äºŽæµ‹è¯•ã€‚

```
"alloc": {
  "0x0000000000000000000000000000000000000001": {"balance": "111111111"},
  "0x0000000000000000000000000000000000000002": {"balance": "222222222"}
}
```

å®šä¹‰å®Œ JSON æ–‡ä»¶ä¸­å®šä¹‰çš„åˆ›ä¸–çŠ¶æ€ä¹‹åŽï¼Œè¿˜éœ€è¦åœ¨å¯åŠ¨å‰åˆå§‹åŒ–æ¯ä¸ª Geth èŠ‚ç‚¹ï¼Œæ¥ç¡®ä¿æ‰€æœ‰çš„åŒºå—é“¾å‚æ•°è¢«è®¾ç½®æ­£ç¡®ã€‚åœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œï¼š

```shell
$ geth --datadir "./node_01" init genesis.json
```

"./node_01" æ˜¯ç”¨æ¥æŒ‡å®š node ä¿å­˜çš„ç›®å½•ã€‚

```shell
WARN [02-05|12:07:43] No etherbase set and no accounts found as default
INFO [02-05|12:07:43] Allocated cache and file handles         database=/Users/qd-hxt/Documents/gworkspace/private-eth/node_01/geth/chaindata cache=16 handles=16
INFO [02-05|12:07:43] Writing custom genesis block
INFO [02-05|12:07:43] Successfully wrote genesis state         database=chaindata                                                             hash=b63ed5â€¦4c90c6
INFO [02-05|12:07:43] Allocated cache and file handles         database=/Users/qd-hxt/Documents/gworkspace/private-eth/node_01/geth/lightchaindata cache=16 handles=16
INFO [02-05|12:07:43] Writing custom genesis block
INFO [02-05|12:07:43] Successfully wrote genesis state         database=lightchaindata                                                             hash=b63ed5â€¦4c90c6
```

## è¿è¡Œäº¤äº’å¼ console

æˆ‘ä»¬å¯ä»¥è¿è¡Œ Geth å†…å»ºçš„ JavaScript consoleï¼Œæ‰§è¡Œå‘½ä»¤ï¼š

```shell
geth --datadir "./node_01" console 2>console.log
```

å¾—åˆ°ç»“æžœï¼š

```shell
Welcome to the Geth JavaScript console!

instance: Geth/v1.7.3-stable/darwin-amd64/go1.9.3
 modules: admin:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0
```

è¾“å…¥ `exit` å¯é€€å‡ºã€‚

## å¯åŠ¨èŠ‚ç‚¹

```
$ geth --datadir "./node_01" --nodiscover --networkid 1234 console 2>console.log
```

- `--networkid` ä¸Ž genesis.json ä¸­çš„ chainId ä¸€è‡´

- `--identity` è®¾ç½®èŠ‚ç‚¹ ID

- `--port geth` èŠ‚ç‚¹ç«¯å£ default: 30303

- `--rpc` å¯ç”¨ rpc æœåŠ¡ default: 8545

- `--rpcport` rpc æœåŠ¡ç«¯å£

- `--rpccorsdomain` è¿™é‡Œé…ç½®â€œ*â€æ˜¯å…è®¸é€šè¿‡ä»»æ„åŸŸåè®¿é—®ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå…·ä½“çš„åŸŸåå¦‚ï¼šâ€œhttp://yourdomain.comâ€

`--nodiscover` å…³é—­èŠ‚ç‚¹è‡ªåŠ¨å‘çŽ°

- `--verbosity` æ—¥å¿—ç­‰çº§ï¼š0=silent, 1=error, 2=warn, 3=info, 4=debug, 5=detail (default: 3)

å¯ä»¥é€šè¿‡ `admin.nodeInfo` æŸ¥çœ‹èŠ‚ç‚¹ä¿¡æ¯ã€‚

```
> admin.nodeInfo
{
  enode: "enode://1c95422acbab6a5142a23d17e60797fbda2217e4e34ba2924eb7eec7f7fad4622f29cdad7f9ac67b832f9634530565c967c9bf50de8443169ad88c7c27f4c6f2@[::]:30303?discport=0",
  id: "1c95422acbab6a5142a23d17e60797fbda2217e4e34ba2924eb7eec7f7fad4622f29cdad7f9ac67b832f9634530565c967c9bf50de8443169ad88c7c27f4c6f2",
  ip: "::",
  listenAddr: "[::]:30303",
  name: "Geth/v1.7.3-stable/darwin-amd64/go1.9.3",
  ports: {
    discovery: 0,
    listener: 30303
  },
  protocols: {
    eth: {
      difficulty: 131072,
      genesis: "0xb63ed5e47ea59262356fed3e0bfa207cdd1d2253f57ec02acea174dde44c90c6",
      head: "0xb63ed5e47ea59262356fed3e0bfa207cdd1d2253f57ec02acea174dde44c90c6",
      network: 1234
    }
  }
}
```

## åˆ›å»ºç”¨æˆ·

åœ¨ console ä¸­åˆ›å»ºè´¦æˆ·ï¼š

```
> personal.newAccount('123456')
"0x0e037e8e4e2af2756e6ce92b8493d4fddeb85536"
```

å…¶ä¸­ï¼Œ'123456' ä¸ºè´¦æˆ·çš„å¯†ç ã€‚

æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨ï¼š

```
> personal.listAccounts
["0x0e037e8e4e2af2756e6ce92b8493d4fddeb85536"]
```

## åˆ›å»ºç¬¬äºŒä¸ªèŠ‚ç‚¹å¹¶å¯åŠ¨

åœ¨æ–°çš„ç»ˆç«¯ä¸­æ‰§è¡Œå‘½ä»¤ï¼š

```
$ geth --datadir "./node_02" init genesis.json
```

```
WARN [02-05|12:07:43] No etherbase set and no accounts found as default
INFO [02-05|12:07:43] Allocated cache and file handles         database=/Users/qd-hxt/Documents/gworkspace/private-eth/node_01/geth/chaindata cache=16 handles=16
INFO [02-05|12:07:43] Writing custom genesis block
INFO [02-05|12:07:43] Successfully wrote genesis state         database=chaindata                                                             hash=b63ed5â€¦4c90c6
INFO [02-05|12:07:43] Allocated cache and file handles         database=/Users/qd-hxt/Documents/gworkspace/private-eth/node_01/geth/lightchaindata cache=16 handles=16
INFO [02-05|12:07:43] Writing custom genesis block
INFO [02-05|12:07:43] Successfully wrote genesis state         database=lightchaindata                                                             hash=b63ed5â€¦4c90c6
```

```shell
$ geth --datadir "./node_02" --port 30304 --nodiscover --networkid 1234 console 2>console.log
```

é€šè¿‡ `--port 30304` ä¿®æ”¹ç«¯å£ï¼Œé¿å…å†²çªã€‚

## è¿žæŽ¥

æŸ¥çœ‹å½“å‰ç½‘ç»œä¸­å·²è¿žæŽ¥çš„èŠ‚ç‚¹ã€‚

```shell
> admin.peers
[]
```

å¯è§å½“å‰æ²¡æœ‰èŠ‚ç‚¹ã€‚

åœ¨ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„ç»ˆç«¯ä¸­æ‰§è¡Œï¼š

```shell
admin.addPeer("enode://d173c99eef3e8c540ca47e60b42060f1cdd1cde1aa8d7344962bdafdd0859e8b95e3f475e1c902e1a156f999113d8f9845459afae158896641d4afefe271fb82@[::]:30304?discport=0")
```

`"enode://d173c99eef3e8c540ca47e60b42060f1cdd1cde1aa8d7344962bdafdd0859e8b95e3f475e1c902e1a156f999113d8f9845459afae158896641d4afefe271fb82@[::]:30304?discport=0"` æ˜¯ç¬¬äºŒä¸ªèŠ‚ç‚¹çš„ `admin.nodeInfo` ä¸­çš„ `enode` ä¿¡æ¯ã€‚

æ­¤æ—¶å†æŸ¥çœ‹èŠ‚ç‚¹ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°ï¼š

```shell
> admin.peers

[{
    caps: ["eth/63"],
    id: "d173c99eef3e8c540ca47e60b42060f1cdd1cde1aa8d7344962bdafdd0859e8b95e3f475e1c902e1a156f999113d8f9845459afae158896641d4afefe271fb82",
    name: "Geth/v1.7.3-stable/darwin-amd64/go1.9.3",
    network: {
      localAddress: "[::1]:49893",
      remoteAddress: "[::1]:30304"
    },
    protocols: {
      eth: {
        difficulty: 131072,
        head: "0xb63ed5e47ea59262356fed3e0bfa207cdd1d2253f57ec02acea174dde44c90c6",
        version: 63
      }
    }
}]
```

åœ¨ç¬¬äºŒä¸ªç»ˆç«¯ä¸­æ‰§è¡Œç±»ä¼¼çš„æ“ä½œã€‚

## æŒ–çŸ¿

æŸ¥çœ‹åŒºå—æ•°é‡ï¼š

```shell
> eth.blockNumber
0
```

è¿™æ˜¯å› ä¸ºè¿˜æ²¡å¼€å§‹æŒ–çŸ¿ï¼Œç¬¬ä¸€ä¸ªç»ˆç«¯ä¸­æ‰§è¡Œå‘½ä»¤å¼€å§‹æŒ–çŸ¿ï¼š

```shell
>  miner.start(1)

null
```

æ­¤æ—¶æ–°å»ºæ–°çš„ç»ˆç«¯çª—å£é€šè¿‡å‘½ä»¤ï¼š

```shell
$ tail -f console.log
INFO [02-05|15:36:45] Generating DAG in progress               epoch=0 percentage=28 elapsed=1m34.530s
INFO [02-05|15:36:50] Generating DAG in progress               epoch=0 percentage=29 elapsed=1m39.512s
INFO [02-05|15:36:54] Generating DAG in progress               epoch=0 percentage=30 elapsed=1m44.081s
INFO [02-05|15:36:59] Generating DAG in progress               epoch=0 percentage=31 elapsed=1m48.749s
INFO [02-05|15:37:04] Generating DAG in progress               epoch=0 percentage=32 elapsed=1m53.884s
INFO [02-05|15:37:09] Generating DAG in progress               epoch=0 percentage=33 elapsed=1m58.900s
INFO [02-05|15:37:14] Generating DAG in progress               epoch=0 percentage=34 elapsed=2m3.577s
INFO [02-05|15:37:18] Generating DAG in progress               epoch=0 percentage=35 elapsed=2m7.553s
INFO [02-05|15:37:22] Generating DAG in progress               epoch=0 percentage=36 elapsed=2m11.685s
INFO [02-05|15:37:25] Generating DAG in progress               epoch=0 percentage=37 elapsed=2m15.286s
INFO [02-05|15:37:29] Generating DAG in progress               epoch=0 percentage=38 elapsed=2m18.724s
INFO [02-05|15:37:32] Generating DAG in progress               epoch=0 percentage=39 elapsed=2m22.083s
```

percentage åŠ è½½åˆ° 100 å°±ä¼šå¼€å§‹æŒ–ã€‚ä¸€æ®µæ—¶é—´åŽå†æŸ¥çœ‹ block çš„æ•°é‡ï¼š

```shell
> eth.blockNumber
5
```

åœæ­¢æŒ–çŸ¿ï¼š

```shell
> miner.stop()

true
```

åœ¨å¦ä¸€ä¸ªèŠ‚ç‚¹ç»ˆç«¯ä¸­ï¼Œæ‰§è¡Œ `eth.blockNumber` ä¹Ÿå¯ä»¥çœ‹åˆ°åŒºå—çš„æ•°é‡ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªåŒºå—æŒ–æŽ˜å®ŒæˆåŽä¼šå°†åŒºå—ä¿¡æ¯è¿›è¡Œå¹¿æ’­ã€‚ç¬¬äºŒä¸ªèŠ‚ç‚¹æ”¶åˆ°åŒºå—ä¿¡æ¯éªŒè¯åŽä¼šå°†å…¶æ·»åŠ åˆ°é“¾ä¸­ã€‚

## æŸ¥è¯¢åŒºå—ä¿¡æ¯

å¯ä»¥çœ‹åˆ°ï¼Œ`node_01/geth/chaindata` ä¸‹å’Œ `node_02/geth/chaindata` çš„æ–‡ä»¶ç›¸ä¼¼ï¼Œå®žé™…ä¸Šï¼Œæ–‡ä»¶ä¸­çš„æ•°æ®æ˜¯ç›¸åŒçš„ã€‚

ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„ç»ˆç«¯ä¸­ï¼ŒæŸ¥çœ‹ index ä¸º 12 çš„åŒºå—ä¿¡æ¯ï¼š

```shell
> eth.getBlock(12)
{
  difficulty: 131648,
  extraData: "0xd883010703846765746887676f312e392e338664617277696e",
  gasLimit: 3178585,
  gasUsed: 0,
  hash: "0xe83828e13135003f69ade5c5828aa5ef335ca6daf618572aa11aa06dc9074a38",
  logsBloom: "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
  miner: "0x0e037e8e4e2af2756e6ce92b8493d4fddeb85536",
  mixHash: "0x056e37a82d539164a0418a376c26aac82ea40b0ca9faf5f8bc29b9f35f672f2a",
  nonce: "0x1824b7b8e8a8f89a",
  number: 12,
  parentHash: "0xcb6654430e3a39855563078c937aa3079ab2908c6ce36cfcc16cffc7713cdec3",
  receiptsRoot: "0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",
  sha3Uncles: "0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",
  size: 536,
  stateRoot: "0x24ab7bb56c97cfd67d95571cd3f1ea20cd12707992fe65ddd3759ec57f737e5d",
  timestamp: 1517816470,
  totalDifficulty: 1706816,
  transactions: [],
  transactionsRoot: "0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",
  uncles: []
}
```

ç¬¬äºŒä¸ªèŠ‚ç‚¹çš„ç»ˆç«¯ä¸­åŒæ ·å¯æŸ¥çœ‹åˆ°ç›¸åŒçš„åŒºå—ä¿¡æ¯ï¼Œhash éƒ½ä¸º `0xe83828e13135003f69ade5c5828aa5ef335ca6daf618572aa11aa06dc9074a38`ã€‚

å†æŸ¥çœ‹ 78 åŒºå—çš„ hash ä¹Ÿéƒ½ä¸º `0x8d7acfd94b2fb0286e0c1477f70584bbe9ed723be3890e4bb575266cf983b4bf`ã€‚

> æ³¨æ„ï¼šå‚æ•° `--networkid` å¿…é¡»è¦ä¸€è‡´ï¼Œä¸ç„¶æ·»åŠ åŽ `admin.peers` æŸ¥æ‰¾ä¸åˆ°ã€‚

é€šè¿‡å‘½ä»¤ `eth.getBlock(eth.blockNumber).miner` å¯ä»¥æŸ¥çœ‹æŒ–åˆ°æœ€æ–°åŒºå—çš„çŸ¿å·¥ã€‚

```shell
> eth.getBlock(eth.blockNumber).miner
"0x0e037e8e4e2af2756e6ce92b8493d4fddeb85536"
```

å®žé™…ä¸Šï¼Œè¾“å‡ºå°±æ˜¯ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„è´¦æˆ·åœ°å€ï¼š

```shell
> personal.listAccounts
["0x0e037e8e4e2af2756e6ce92b8493d4fddeb85536"]
```

æŸ¥çœ‹çŸ¿å·¥åœ°å€çš„è´¦æˆ·ä½™é¢ï¼Œéšç€ä¸åœåœ°æŒ–çŸ¿ï¼Œä¹Ÿè´¦æˆ·çš„ä½™é¢ä¼šä¸æ–­å¢žåŠ ï¼š

```shell
> eth.getBalance(eth.getBlock(eth.blockNumber).miner)
7.18e+21
> eth.getBalance(eth.getBlock(eth.blockNumber).miner)
7.185e+21
> eth.getBalance(eth.getBlock(eth.blockNumber).miner)
7.19e+21
```

ç¬¬äºŒä¸ªèŠ‚ç‚¹æ·»åŠ è´¦æˆ·ï¼ˆæŒ–çŸ¿å‰å¿…é¡»å…ˆæ·»åŠ è´¦æˆ·ï¼‰ï¼Œå¹¶å¼€å§‹æŒ–çŸ¿ï¼š

```shell
> personal.newAccount()
Passphrase:
Repeat passphrase:
"0xa61d11112ea4cdcde9a1107062d0e773b7eec2c9"
> personal.listAccounts
["0xa61d11112ea4cdcde9a1107062d0e773b7eec2c9"]

> miner.start(1)
null
```

åˆå§‹åŒ–å®ŒæˆåŽï¼ŒæŸ¥çœ‹æœ€æ–°åŒºå—çš„çŸ¿å·¥åœ°å€ï¼š

```shell
> eth.getBlock(eth.blockNumber).miner
"0xa61d11112ea4cdcde9a1107062d0e773b7eec2c9"
> eth.getBlock(eth.blockNumber).miner
"0xa61d11112ea4cdcde9a1107062d0e773b7eec2c9"
> eth.getBlock(eth.blockNumber).miner
"0x0e037e8e4e2af2756e6ce92b8493d4fddeb85536"
```

ä¸¤ä¸ªçŸ¿å·¥å·²ç»åœ¨æ¯”èµ›æŒ–çŸ¿äº†ðŸ™‚ã€‚æŸ¥çœ‹ç¬¬äºŒä¸ªçŸ¿å·¥çš„è´¦æˆ·ï¼š

```shell
> eth.getBalance("0xa61d11112ea4cdcde9a1107062d0e773b7eec2c9")
186562500000000000000
> eth.getBalance("0xa61d11112ea4cdcde9a1107062d0e773b7eec2c9")
191562500000000000000
```

æœ€åŽè´´ä¸€ä¸‹æ¡Œé¢çš„æˆªå›¾ï¼š

![01](../../../../images/20180202-geth/01.png)

è¡¥å……ï¼š

ä½¿ç”¨ ipc è°ƒç”¨ï¼ˆè¿™é‡Œæ˜¯æŒ‡åœ¨åŒä¸€å°è®¡ç®—æœºä¸Šçš„å…¶ä»–è¿›ç¨‹å¯ä»¥ä½¿ç”¨IPCæ–‡ä»¶åˆ›å»ºä¸Žgethçš„åŒå‘é€šä¿¡ï¼Œæ¯”å¦‚è¯´åœ¨å…¶ä»–ç»ˆç«¯ä¸­è°ƒç”¨åŒä¸€ä¸ªèŠ‚ç‚¹ï¼‰ï¼š

```shell
$ geth --datadir "./node_01" --nodiscover --networkid 1234 --ipcpath "./node_01/geth.ipc" console 2>console.log
```

```shell
$ geth --datadir "./node_02" --port 30304 --nodiscover --networkid 1234 --ipcpath "./node_02/geth.ipc" console 2>console.log
```

å…¶ä»–ç»ˆç«¯ä¸­è°ƒç”¨ï¼š

```shell
$ geth attach ipc:./node_01/geth.ipc
Welcome to the Geth JavaScript console!

instance: Geth/v1.7.3-stable/darwin-amd64/go1.9.3
coinbase: 0x0e037e8e4e2af2756e6ce92b8493d4fddeb85536
at block: 2106 (Mon, 05 Feb 2018 17:22:51 CST)
 datadir: /Users/qd-hxt/Documents/gworkspace/private-eth/node_01
 modules: admin:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0

>
```
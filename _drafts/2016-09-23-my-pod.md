---
layout: post
title: "åˆ›å»ºè‡ªå·±çš„pod"
description: ""
category: articles
tags: [CocoaPods]
comments: true
---

## å‰è¨€

ä¼°è®¡è¿™æ˜¯ä¸‹ä¸ªç‰ˆæœ¬é—´æ­‡èµ·çš„æœ€åä¸€ç¯‡äº†å§ã€‚é¡¹ç›®ä¸Šéœ€è¦ä¸€ä¸ªå›¾ç‰‡é€‰æ‹©æ§ä»¶ï¼Œæ‰¾åˆ°ä¸€ä¸ª [`swift` é¡¹ç›®](https://github.com/hyperoslo/ImagePicker)ï¼ŒèŠ±äº†ä¸¤å¤©æ—¶é—´è½¬æˆäº† OC é¡¹ç›®ï¼Œç„¶åæƒ³åšä¸ª `pod` åˆ†äº«ç»™å¤§å®¶ã€‚

## åˆ›å»ºé¡¹ç›®

é¦–å…ˆéœ€è¦åœ¨ `github` ä¸Šåˆ›å»ºæ–°çš„é¡¹ç›®ï¼Œä»¥å½“å‰é¡¹ç›®ä¸ºä¾‹ï¼š

![pod01](https://lettleprince.github.io/images/20160921-mypod/pod01.png)

ç„¶å clone åˆ°æœ¬åœ°ï¼Œè¿›è¡Œæºç å’Œèµ„æºçš„æ·»åŠ ã€‚å† commit å¹¶ push åˆ° master åˆ†æ”¯ä¸Šã€‚è¿™äº›éƒ½æ˜¯ git ç›¸å…³ï¼Œä¸ç»†ä»‹ç»ã€‚

> é™„å¼€æºåè®®ä»‹ç»ï¼Œä¸€èˆ¬é¡¹ç›®é€‰æ‹© MIT å°±å¥½ï¼š

![pod03](https://lettleprince.github.io/images/20160921-mypod/pod03.png)

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå‘å¸ƒ pod éœ€è¦æœ‰ tag ç‰ˆæœ¬ã€‚æ‰€ä»¥è¦æ‰“ä¸ª tag å¹¶è¿›è¡Œ pushã€‚

```shell
# hanxt @ Hanxt in ~/Documents/GitHubWorkspace/ImagePicker-Objective-C on git:master o [16:53:33]
$ git tag 0.0.1

# hanxt @ Hanxt in ~/Documents/GitHubWorkspace/ImagePicker-Objective-C on git:master o [16:53:35]
$ git push --tags
Username for 'https://github.com': lettleprince
Password for 'https://lettleprince@github.com':
Total 0 (delta 0), reused 0 (delta 0)
To https://github.com/lettleprince/ImagePicker-Objective-C.git
 * [new tag]         0.0.1 -> 0.0.1
```

## pod å‡†å¤‡

é¦–å…ˆæ³¨å†Œ podï¼Œç±»ä¼¼æ³¨å†Œè´¦å·ï¼š

```shell
# hanxt @ Hanxt in ~ [16:16:15]
$ pod trunk register xxx@xxx 'TonyHan'
[!] Please verify the session by clicking the link in the verification email that has been sent to xxx@xxx
```

è¿›å…¥é‚®ç®±åç‚¹å‡»é“¾æ¥ç¡®è®¤ï¼Œè¿”å›å‘½ä»¤è¡Œç¡®è®¤ï¼š

```shell
# hanxt @ Hanxt in ~ [16:16:36]
$ pod trunk me
  - Name:     TonyHan
  - Email:    xxx@xxx
  - Since:    September 23rd, 02:16
  - Pods:     None
  - Sessions:
    - September 23rd, 02:16 - January 29th, 2017 02:17.
```

## åˆ›å»º podspec æ–‡ä»¶

```shell
# hanxt @ Hanxt in ~ [16:17:35]
$ pod spec create ImagePicker-Objective-C

Specification created at ImagePicker-Objective-C.podspec
```

è¯¥æ–‡ä»¶æ˜¯ ruby æ–‡ä»¶ï¼Œé‡Œé¢çš„æ¡ç›®éƒ½å¾ˆå®¹æ˜“çŸ¥é“å«ä¹‰ã€‚å…¶ä¸­éœ€è¦è¯´æ˜çš„åˆå‡ ä¸ªå‚æ•°ï¼š

1. **`s.license`** : Pods ä¾èµ–åº“ä½¿ç”¨çš„ license ç±»å‹ï¼Œå¤§å®¶å¡«ä¸Šè‡ªå·±å¯¹åº”çš„é€‰æ‹©å³å¯ã€‚
2. **`s.source_files`** : è¡¨ç¤ºæºæ–‡ä»¶çš„è·¯å¾„ï¼Œæ³¨æ„è¿™ä¸ªè·¯å¾„æ˜¯ç›¸å¯¹ podspec æ–‡ä»¶è€Œè¨€çš„ã€‚
3. **`s.frameworks`** : éœ€è¦ç”¨åˆ°çš„ frameworksï¼Œä¸éœ€è¦åŠ  .frameworks åç¼€ã€‚

å¯ä»¥å‚è€ƒæˆ‘çš„æ–‡ä»¶ [ImagePicker-Objective-C.podspec](https://github.com/lettleprince/ImagePicker-Objective-C/blob/master/ImagePicker-Objective-C.podspec)ã€‚

## pod éªŒè¯

ä¸º pod æ·»åŠ ç‰ˆæœ¬å·å¹¶æ‰“ä¸Š tag (æˆ‘æ²¡æœ‰å‘ç°æ‰§è¡Œåæœ‰ä»€ä¹ˆå˜åŒ–ğŸ˜…)ï¼š

```shell
# hanxt @ Hanxt in ~/Documents/GitHubWorkspace/ImagePicker-Objective-C on git:master o [16:56:54]
$ set the new version to 0.0.1

# hanxt @ Hanxt in ~/Documents/GitHubWorkspace/ImagePicker-Objective-C on git:master o [16:56:56]
$ set the new tag to 0.0.1
```

æ‰§è¡ŒéªŒè¯å‘½ä»¤ï¼š

```shell
# hanxt @ Hanxt in ~/Documents/GitHubWorkspace/ImagePicker-Objective-C on git:master o [16:57:06]
$ pod lib lint

xcode-select: error: tool 'xcodebuild' requires Xcode, but active developer directory '/Library/Developer/CommandLineTools' is a command line tools instance
 -> ImagePicker-Objective-C (0.0.1)
    - ERROR | license: Sample license type.
    - ERROR | description: The description is empty.
    - ERROR | [iOS] unknown: Encountered an unknown error (The `ImagePicker-Objective-C` pod failed to validate due to 2 errors:
    - ERROR | license: Sample license type.
    - ERROR | description: The description is empty.

) during validation.

[!] ImagePicker-Objective-C did not pass validation, due to 3 errors.
You can use the `--no-clean` option to inspect any issue.
```

æœ‰é”™ï¼Œlicense å’Œ description æœ‰é—®é¢˜ï¼Œæ”¹æ‰ã€‚ä½†æ˜¯ `xcode-select: error: tool 'xcodebuild' requires Xcode` è¿™ä¸ªé”™è¯¯å‘¢ï¼Ÿ`stackoverflow` è¯´æ˜¯å¤§æ¦‚æ‰¾ä¸åˆ°è¿™ä¸ªå·¥å…·äº†ï¼Œæˆ‘çªç„¶æƒ³èµ·æ¥æ˜¨å¤©æˆ‘æŠŠ Xcode æ”¹åä¸º Xcode7 å’Œ Xcode8 ï¼Œä¼°è®¡æ˜¯å‘½ä»¤çš„é“¾æ¥æ‰¾ä¸åˆ°äº†ã€‚æŠŠåå­—æ”¹å› Xcodeï¼Œå†æ¬¡éªŒè¯ï¼ŒæˆåŠŸã€‚

```shell
# hanxt @ Hanxt in ~/Documents/GitHubWorkspace/ImagePicker-Objective-C on git:master x [16:59:21] C:1
$ pod lib lint

 -> ImagePicker-Objective-C (0.0.1)
```

## Demo

æä¾›ä¾›åˆ«äººå‚è€ƒçš„ Demo æ˜¯æ›´ä¼˜é›…çš„åšæ³•ã€‚æŠŠä¹‹å‰çš„æµ‹è¯•ä»£ç æ‹‰è¿‡æ¥ï¼Œå±‚çº§ç»“æ„å¦‚å›¾ï¼š

![pod02](https://lettleprince.github.io/images/20160921-mypod/pod02.png)

pod æ–‡ä»¶å¦‚ä¸‹ï¼š

```ruby
platform :ios, "8.0"

inhibit_all_warnings!

target "ImagePickerDemo" do
    pod 'ImagePicker-Objective-C', path: '../../'
end
```

install ä¹‹åéœ€è¦å°†ä¹‹å‰æ§ä»¶æºç åˆ æ‰ï¼Œç”¨æˆ‘ä»¬çš„ pod ä¸­çš„æ§ä»¶ã€‚Build æ— é—®é¢˜ï¼Œè¿è¡Œæ— é—®é¢˜ã€‚

### å‚è€ƒï¼š

[CocoaPodsè¯¦è§£ä¹‹----åˆ¶ä½œç¯‡](http://blog.csdn.net/wzzvictory/article/details/20067595)

### ä»£ç ï¼š
æ–‡ç« ä¸­çš„ä»£ç éƒ½å¯ä»¥ä»æˆ‘çš„GitHub [`MVVMDemo`](https://github.com/lettleprince/MVVMM)æ‰¾åˆ°ã€‚

